<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="google-site-verification" content="ZWWdaYwb-E3JvxMSiXcCDveaghrcK6aBBCohc9KAV_g" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
    <title>Doctrado</title>
    <!-- CSS  -->
    <meta name="yandex-verification" content="eb0417ab5cfa9ad9"/>
    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="csrf-token" content="Wx6PFl4mn9yqYIFxDmcvdgOH6tNtWn3dVOktVC7V">
    <title>Doctrado</title>


    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="shortcut icon" href="https://doctrado-sviasy.rhcloud.com/img/favicon.ico">
    <link rel="stylesheet" href="../NSDcss/login.css">
    <style type="text/css">
        .parallax-container {
            height: 400px;
        }

        #progress {
            width: 200px;
            height: 200px;
        }



        .test-modal { width: 75% !important ; max-height: 100% !important ; overflow-y: hidden !important ;}

    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="../css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <script charset="UTF-8"
            src="//cdn.sendpulse.com/28edd3380a1c17cf65b137fe96516659/js/push/819b89976985b49b08b2d06dbbf60964_1.js"
            async></script>

</head>





<div id="test-dialog" class="modal modal-fixed-footer test-modal">
    <div class="modal-content" id="test-container">
        <h6 class="center center-align">Редактирование Теста</h6>



        <ul class="collapsible" data-collapsible="accordion" id="test-ul">


        </ul>
        <div class="col s12 row" href = "javascript:void(0);" onclick = "addTest();"> <a class="btn col s12 center center-align">+</a></div>

    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action waves-effect waves-green btn-flat ">Применить изменения</a>
    </div>
</div>

<body>



<a href="#test-dialog" class="btn modal-trigger"> привет </a>





</body>
<script>

    function getUUID() {
       return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {var r = Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;return v.toString(16);});

    }


var GlobalChildNodesSize = 1;
var test ;
var stringTest = '';
function deleteAnswer() {


}

function deleteQuestion() {

}



function loadingTest(ltest) {




    for(var i=0;i<ltest.questions.length;i++){
        //https://doctrado-sviasy.rhcloud.com/test?course=bd325b1e-5541-4906-bbaa-fe3e3275fb81

        addTest(ltest.questions[i].question,ltest.questions[i].numeric,ltest.questions[i].answers);


    }
}

function addTest(questionText,numeric,answers) {

}


function addTest() {




    var test_container= document.getElementById('test-ul');
    var counter = test_container.childElementCount+1;

    var inputView="";
    inputView += "<li id = \"question-list-"+counter+"\">";
    inputView += "                <div class=\"collapsible-header center center-align\">Вопрос "+counter+"<\/div>";
    inputView += "                <div class=\"collapsible-body\">";
    inputView += "                    <div class=\"row\">";
    inputView += "                        <div class=\"input-field col s12\">";
    inputView += "                            <input id=\"question-name-"+counter+"\" type=\"text\" class=\"validate\">";
    inputView += "                            <label for=\"question-name-"+counter+"\">Вопрос<\/label>";
    inputView += "                        <\/div>";
    inputView += "                    <\/div>";
    inputView += "";
    inputView += "                    <table class=\"striped responsive-table centered\" id=\"answer-table-"+counter+"\">";
    inputView += "                        <thead>";
    inputView += "                        <tr>";
    inputView += "                            <th data-field=\"answer-name\">Ответ<\/th>";
    inputView += "                            <th data-field=\"answer-is-true\">Правильный ответ<\/th>";
    inputView += "";
    inputView += "                        <\/tr>";
    inputView += "                        <\/thead>";
    inputView += "                     ";
    inputView += "               ";
    inputView += "                    <\/table>";
    inputView += "                    <div class=\"col s12 row\" id=\""+counter+"\" href = \"javascript:void(0);\" onclick = \"addAnswer(this.id);\"> <a class=\"btn col s12 center center-align\">+<\/a><\/div>";
    inputView += "                <\/div>";
    inputView += "            <\/li>";

    $("#test-container ul").append(inputView);


    var ul = document.getElementById('test-ul');


    //console.log( ul.innerHTML);
    toJSON();

}

    function toJSON() {

        var ul = document.getElementById('test-ul');

        for (var i = 0; i < ul.childNodes.length; i++) {
            var QName = ul.childNodes[i];


            console.log("Q name " + QName);

        }


    }



function addAnswer(sender_id) {
  //  alert(sender_id);

   var table = document.getElementById('answer-table-'+sender_id);
   var counter = table.rows.length;
    $('#'+table.id+' tr:last').after('<tr><td><div class="left-align  input-field col s12"><input id="answer-name-'+counter+'" type="text" class="validate"><label for="answer-name-'+counter+'">Ответ</label></div></td><td><div class=" switch center center-align"><label>Нет<input type="checkbox"><span class="lever"></span>Да</label></div></td></tr>');


}









    $(document).ready(function(){
    $('.collapsible').collapsible();
});




$(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal').modal();

    stringTest = '{"testUUID":"56ed6211-afbe-44ce-9ad3-cefc444a1bd8","questions":[{"question":"???? ??? ?? ????","questionUUID":"ef714c17-1e69-451e-b61f-a02e7f507bd2","answers":[{"QuestionUUID":"ef714c17-1e69-451e-b61f-a02e7f507bd2","Answer":"????","isTrue":0,"numeric":"1"}],"hasAnswers":0,"numeric":"1"},{"question":"???? ??? ?? ????","questionUUID":"1e75f7dc-fd31-4a07-9a31-168460719a25","answers":[{"QuestionUUID":"1e75f7dc-fd31-4a07-9a31-168460719a25","Answer":"?? ????","isTrue":1,"numeric":"1"},{"QuestionUUID":"1e75f7dc-fd31-4a07-9a31-168460719a25","Answer":"?? ???? ????","isTrue":1,"numeric":"2"}],"hasAnswers":0,"numeric":"2"}]}';

    test = JSON.parse(stringTest);
    console.log(test);





}); </script>


</html>